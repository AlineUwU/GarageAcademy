<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Garage Academy</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .title {
            text-align: center;
            color: #ff6b9d;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        
        .button {
            background: #ff6b9d;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: calc(100% - 20px);
        }
        
        .button:hover {
            background: #ff5a8a;
        }
        
        .dialog-box {
            background: #333;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            min-height: 150px;
        }
        
        .speaker {
            color: #ff9a9e;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .character-display {
            text-align: center;
            padding: 40px;
            background: #f0f8ff;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .vehicle {
            font-size: 4em;
            margin-bottom: 10px;
        }
        
        .hidden {
            display: none;
        }
        
        .choices {
            margin-top: 20px;
        }
        
        .choice-btn {
            background: #6a5acd;
            color: white;
            border: none;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            text-align: left;
        }
        
        .choice-btn:hover {
            background: #5a4fcf;
        }
        
        .stats {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Menu -->
        <div id="menu">
            <h1 class="title">Garage Academy</h1>
            <p class="subtitle">Una Historia de Amor Mecanica</p>
            <button class="button" onclick="startGame()">Iniciar Juego</button>
            <button class="button" onclick="showCharacters()">Ver Personajes</button>
        </div>

        <!-- Characters Screen -->
        <div id="characters" class="hidden">
            <h2>Personajes</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div style="background: #f9f9f9; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 3em; text-align: center;">🚁</div>
                    <h3>Heli-Chan</h3>
                    <p>Helicoptero militar. Personalidad ruda pero se enamora de quien no le teme.</p>
                </div>
                <div style="background: #f9f9f9; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 3em; text-align: center;">🛥️</div>
                    <h3>Motorin</h3>
                    <p>Lancha tsundere. Dice "BAKA!" y se enamora cuando tocan su popa.</p>
                </div>
                <div style="background: #f9f9f9; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 3em; text-align: center;">❄️</div>
                    <h3>Gela & Froza</h3>
                    <p>Gemelas refrigeradoras kuudere. Se derriten por el calor humano.</p>
                </div>
                <div style="background: #f9f9f9; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 3em; text-align: center;">🚙</div>
                    <h3>Jeepy</h3>
                    <p>Jeep osananajimi. Amiga de la infancia energetica.</p>
                </div>
                <div style="background: #ffebee; padding: 15px; border-radius: 8px; border: 2px solid #f44336;">
                    <div style="font-size: 3em; text-align: center;">🏍️</div>
                    <h3>Greta Eisenrad</h3>
                    <p>⚠️ HEROINA SECRETA - Motocicleta ruda que entra a mitad del ciclo. PELIGRO: Yandere obsesiva.</p>
                </div>
            </div>
            <button class="button" onclick="showMenu()">Volver</button>
        </div>

        <!-- Game Screen -->
        <div id="game" class="hidden">
            <div class="stats">
                <span>Capitulo: <span id="chapter">1</span></span> | 
                <span>Afecto: <span id="affection">Neutral</span></span>
            </div>
            
            <div class="character-display" id="characterArea">
                <div class="vehicle">🏫</div>
                <div>Garage Academy</div>
            </div>

            <div class="dialog-box">
                <div class="speaker" id="speaker"></div>
                <div id="text"></div>
                <div class="choices" id="choices"></div>
                <button class="button hidden" id="continueBtn" onclick="nextDialog()">Continuar</button>
            </div>

            <button class="button" onclick="showMenu()">Menu Principal</button>
        </div>
    </div>

    <script>
        let gameState = {
            scene: 'intro',
            dialog: 0,
            affection: { heli: 0, motorin: 0, twins: 0, jeepy: 0 }
        };

        const dialogs = {
            intro: [
                {
                    speaker: "Narrador",
                    text: "Bienvenido a Garage Academy, la academia mas prestigiosa para vehiculos sensibles!",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "Eres el nuevo estudiante humano en esta escuela llena de vehiculos antropomorficos.",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "Tu primer dia comienza ahora. Estas listo para esta experiencia?",
                    character: "🏫",
                    choices: [
                        { text: "¡Si, estoy emocionado!", next: "courtyard" },
                        { text: "Esto es raro pero sigamos", next: "courtyard" },
                        { text: "En que me meti?", next: "courtyard" }
                    ]
                }
            ],
            courtyard: [
                {
                    speaker: "Narrador",
                    text: "Entras al patio. Varios vehiculos socializan en grupos.",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "De repente escuchas rotores acercandose. WOOP WOOP WOOP!",
                    character: "🏫"
                },
                {
                    speaker: "Heli-Chan",
                    text: "¡ALTO AHI SOLDADO! Identificate inmediatamente. Este sector esta bajo mi supervision.",
                    character: "🚁"
                },
                {
                    speaker: "Heli-Chan",
                    text: "Y bien? No vas a huir como todos los demas cobardes?",
                    character: "🚁",
                    choices: [
                        { text: "No le tengo miedo a nadie", next: "heli_impressed", affection: { heli: 2 } },
                        { text: "Soy el nuevo estudiante", next: "heli_neutral" },
                        { text: "Retroceder nervioso", next: "heli_sad", affection: { heli: -1 } }
                    ]
                }
            ],
            heli_impressed: [
                {
                    speaker: "Heli-Chan",
                    text: "Interesante! No muchos mantienen su posicion frente a un Apache. Respeto eso, soldado.",
                    character: "🚁"
                },
                {
                    speaker: "Heli-Chan",
                    text: "Tal vez no seas como los otros. Me llamo Heli-Chan, capitan de patrulla aerea.",
                    character: "🚁"
                },
                {
                    speaker: "Narrador",
                    text: "Has impresionado a Heli-Chan! Su respeto militar se desarrolla en algo mas...",
                    character: "🚁",
                    next: "motorin_intro"
                }
            ],
            heli_neutral: [
                {
                    speaker: "Heli-Chan",
                    text: "Ah, el nuevo estudiante humano. He oido rumores.",
                    character: "🚁"
                },
                {
                    speaker: "Heli-Chan",
                    text: "Manten disciplina en mi territorio y no tendremos problemas, civil.",
                    character: "🚁",
                    next: "motorin_intro"
                }
            ],
            heli_sad: [
                {
                    speaker: "Heli-Chan",
                    text: "Otro cobarde mas. Que aburrido.",
                    character: "🚁"
                },
                {
                    speaker: "Heli-Chan",
                    text: "Espero que crezcas durante tu estancia aqui, civil.",
                    character: "🚁",
                    next: "motorin_intro"
                }
            ],
            motorin_intro: [
                {
                    speaker: "Narrador",
                    text: "Una lancha roja se acerca a velocidad desde el lago. Viene directo hacia ti!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "VROOOOM! Oye nuevo! Sal de mi camino o te atropello! VROOOOM!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "B-BAKA! Casi te aplasto! Por que no te moviste?",
                    character: "🛥️"
                },
                {
                    speaker: "Narrador",
                    text: "En el susto, pones tu mano en la parte trasera de la lancha para equilibrarte.",
                    character: "🛥️",
                    choices: [
                        { text: "Lo siento! Estas bien?", next: "motorin_touched", affection: { motorin: 2 } },
                        { text: "Quitar la mano rapido", next: "motorin_touched", affection: { motorin: 1 } },
                        { text: "Tu casi me atropellas!", next: "motorin_angry", affection: { motorin: -1 } }
                    ]
                }
            ],
            motorin_touched: [
                {
                    speaker: "Motorin",
                    text: "KYAAAA! Mi popa! PERVERTIDO! VROOOOM VROOOOM!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "N-no puedes tocar a una dama asi! BAKA!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "P-pero... gracias por preocuparte! No es que me importe! BAKA!",
                    character: "🛥️",
                    next: "twins_intro"
                }
            ],
            motorin_angry: [
                {
                    speaker: "Motorin",
                    text: "Como te atreves! YO casi TE atropello!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "BAKA! Los humanos no tienen respeto!",
                    character: "🛥️",
                    next: "twins_intro"
                }
            ],
            twins_intro: [
                {
                    speaker: "Gela",
                    text: "Hermana... hay un humano aqui...",
                    character: "❄️"
                },
                {
                    speaker: "Froza",
                    text: "Si hermana... se ve calido...",
                    character: "❄️"
                },
                {
                    speaker: "Gela",
                    text: "Somos Gela y Froza... gemelas refrigeradoras...",
                    character: "❄️"
                },
                {
                    speaker: "Froza",
                    text: "Mantenemos las cosas frias... pero tu irradias calor...",
                    character: "❄️",
                    choices: [
                        { text: "Ofrecerles un abrazo", next: "twins_warmed", affection: { twins: 3 } },
                        { text: "Preguntar si estan bien", next: "twins_concerned", affection: { twins: 1 } },
                        { text: "Hola chicas", next: "twins_neutral" }
                    ]
                }
            ],
            twins_warmed: [
                {
                    speaker: "Gela",
                    text: "Ah! Tan calido...",
                    character: "❄️"
                },
                {
                    speaker: "Froza",
                    text: "Este sentimiento... no es refrigeracion... es amor...",
                    character: "❄️",
                    next: "jeepy_intro"
                }
            ],
            twins_concerned: [
                {
                    speaker: "Gela",
                    text: "El se preocupa por nosotras...",
                    character: "❄️"
                },
                {
                    speaker: "Froza",
                    text: "Es considerado como el calor del hogar...",
                    character: "❄️",
                    next: "jeepy_intro"
                }
            ],
            twins_neutral: [
                {
                    speaker: "Gela",
                    text: "Hola humano...",
                    character: "❄️"
                },
                {
                    speaker: "Froza",
                    text: "Si necesitas algo frio estamos aqui...",
                    character: "❄️",
                    next: "jeepy_intro"
                }
            ],
            jeepy_intro: [
                {
                    speaker: "???",
                    text: "EEEEHHH! ES REALMENTE EL?!",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "ERES TU! Mi mejor amigo de la infancia!",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Soy Jeepy! Me recuerdas? Soliamos jugar juntos!",
                    character: "🚙",
                    choices: [
                        { text: "Por supuesto que te recuerdo!", next: "jeepy_happy", affection: { jeepy: 3 } },
                        { text: "Me suenas familiar", next: "jeepy_hopeful", affection: { jeepy: 1 } },
                        { text: "No te recuerdo bien", next: "jeepy_sad", affection: { jeepy: -1 } }
                    ]
                }
            ],
            jeepy_happy: [
                {
                    speaker: "Jeepy",
                    text: "KYAAAA! Sabia que no me habias olvidado!",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "He esperado tanto para verte! Cada dia sonaba con este momento!",
                    character: "🚙",
                    next: "end"
                }
            ],
            jeepy_hopeful: [
                {
                    speaker: "Jeepy",
                    text: "Sabia que me recordarias aunque sea un poco!",
                    character: "🚙",
                    next: "end"
                }
            ],
            jeepy_sad: [
                {
                    speaker: "Jeepy",
                    text: "Oh... supongo que han pasado muchos anos...",
                    character: "🚙",
                    next: "end"
                }
            ],
            end: [
                {
                    speaker: "Narrador",
                    text: "Has conocido a las heroinas en tu primer dia. Pero esto es solo el comienzo...",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "De repente, se escucha el rugido ensordecedor de un motor potente...",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "Una motocicleta negra entra a gran velocidad al patio, derrapando y asustando a todos los vehiculos.",
                    character: "🏍️"
                },
                {
                    speaker: "Greta Eisenrad",
                    text: "Fuera de mi camino, chatarra inutil!",
                    character: "🏍️"
                },
                {
                    speaker: "Narrador",
                    text: "La misteriosa motocicleta te mira fijamente con sus faros rojos brillantes...",
                    character: "🏍️"
                },
                {
                    speaker: "Greta Eisenrad",
                    text: "Asi que tu eres el famoso humano... Veremos si vales la pena.",
                    character: "🏍️"
                },
                {
                    speaker: "Narrador",
                    text: "Se aleja rugiendo, dejando a todos en silencio. Quien era esa motocicleta tan intimidante?",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "Continuara... (En el proximo episodio: La llegada de Greta Eisenrad!)",
                    character: "🏫",
                    choices: [
                        { text: "Continuar al Dia 2", next: "day2_start" },
                        { text: "Reiniciar", next: "restart" },
                        { text: "Menu Principal", next: "menu" }
                    ]
                }
            ],
            day2_start: [
                {
                    speaker: "Narrador",
                    text: "DIA 2 - Al dia siguiente te diriges a la escuela con Jeepy.",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Buenos dias! Que emocionante! Vamos juntos a la escuela como en los viejos tiempos!",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Ah, pero tenemos salones diferentes... No te preocupes! A la hora del almuerzo ire a la azotea!",
                    character: "🚙"
                },
                {
                    speaker: "Narrador",
                    text: "Te preguntas como subira un jeep a la azotea, pero decides no preguntar...",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Nos vemos alli! Sera como nuestro lugar secreto! Kyaa!",
                    character: "🚙",
                    next: "day2_class"
                }
            ],
            day2_class: [
                {
                    speaker: "Narrador",
                    text: "Te diriges a tu salon de clases cuando escuchas voces en el pasillo.",
                    character: "🏫"
                },
                {
                    speaker: "Heli-Chan",
                    text: "Soldado! Por que no estas en tu aula asignada? La disciplina es fundamental!",
                    character: "🚁"
                },
                {
                    speaker: "Estudiante",
                    text: "P-perdon! Me perdi!",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "Ves a Heli-Chan regañando a otro estudiante. Que haces?",
                    character: "🚁",
                    choices: [
                        { text: "Acercarse a ver que pasa", next: "heli_route_d2" },
                        { text: "Ir directo al aula", next: "lunch_choice" }
                    ]
                }
            ],
            heli_route_d2: [
                {
                    speaker: "Narrador",
                    text: "Te acercas curioso. Heli-Chan nota tu presencia y de repente se sonroja ligeramente.",
                    character: "🚁"
                },
                {
                    speaker: "Heli-Chan",
                    text: "E-era un regaño necesario! No soy una bully o algo asi! Solo mantengo el orden!",
                    character: "🚁"
                },
                {
                    speaker: "Heli-Chan",
                    text: "La disciplina es importante para el funcionamiento de la unidad... digo, de la escuela!",
                    character: "🚁",
                    choices: [
                        { text: "Me asusta un poco...", next: "lunch_choice" },
                        { text: "Usted manda, sargenta", next: "heli_impressed_d2", affection: { heli: 2 } }
                    ]
                }
            ],
            heli_impressed_d2: [
                {
                    speaker: "Heli-Chan",
                    text: "...! *Sus rotores se detienen por un momento* Tu... tu realmente me entiendes...",
                    character: "🚁"
                },
                {
                    speaker: "Heli-Chan",
                    text: "Descanso, soldado! *Parece... sonreir? Es dificil saberlo con un helicoptero*",
                    character: "🚁"
                },
                {
                    speaker: "Narrador",
                    text: "Se aleja rapidamente, pero parece complacida. Has ganado su respeto!",
                    character: "🚁",
                    next: "lunch_choice"
                }
            ],
            lunch_choice: [
                {
                    speaker: "Narrador",
                    text: "Llega la hora del almuerzo. Tienes dos opciones...",
                    character: "🏫",
                    choices: [
                        { text: "Ir directo a almorzar con Jeepy", next: "jeepy_lunch" },
                        { text: "Ir al baño primero", next: "motorin_encounter_d2" }
                    ]
                }
            ],
            jeepy_lunch: [
                {
                    speaker: "Narrador",
                    text: "Subes a la azotea (aun es un misterio como llego Jeepy ahi) y la encuentras esperandote.",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Llegaste! Sabia que vendrias! Como en los viejos tiempos!",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Te acuerdas cuando jugabamos a las escondidas detras del garaje de tu papa?",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Siempre me encontrabas rapido porque mi motor hacia ruido! Jiji!",
                    character: "🚙"
                },
                {
                    speaker: "Jeepy",
                    text: "Esos fueron los mejores dias de mi vida... y ahora estas aqui otra vez!",
                    character: "🚙",
                    affection: { jeepy: 2 },
                    next: "after_school_choice"
                }
            ],
            motorin_encounter_d2: [
                {
                    speaker: "Narrador",
                    text: "Camino al baño, doblas una esquina y chocas de frente con algo!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "AUCH! Mira por donde... Tu otra vez! BAKA!",
                    character: "🛥️"
                },
                {
                    speaker: "Narrador",
                    text: "Esta vez, accidentalmente has tocado la parte delantera de Motorin - su proa!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "KYAAAA! MI PROA! Eres un completo pervertido! VROOOOM!",
                    character: "🛥️",
                    choices: [
                        { text: "Disculparse nerviosamente", next: "after_school_choice" },
                        { text: "Es que eres una lancha muy grande", next: "motorin_flustered", affection: { motorin: 2 } }
                    ]
                }
            ],
            motorin_flustered: [
                {
                    speaker: "Motorin",
                    text: "G-GRANDE?! Que quieres decir con eso?! BAKA BAKA!",
                    character: "🛥️"
                },
                {
                    speaker: "Motorin",
                    text: "No puedes decir esas cosas asi! *Su motor hace ruidos extraños*",
                    character: "🛥️"
                },
                {
                    speaker: "Narrador",
                    text: "Motorin interpreta tu comentario como coqueteo y se aleja acelerada, claramente nerviosa.",
                    character: "🛥️",
                    next: "after_school_choice"
                }
            ],
            after_school_choice: [
                {
                    speaker: "Narrador",
                    text: "Terminan las clases. La mayoria de vehiculos se van a casa.",
                    character: "🏫",
                    choices: [
                        { text: "Irse a casa con Jeepy", next: "day2_end" },
                        { text: "Quedarse a buscar un libro olvidado", next: "twins_encounter_d2" }
                    ]
                }
            ],
            twins_encounter_d2: [
                {
                    speaker: "Narrador",
                    text: "Te quedas en la escuela vacia buscando tu libro. Escuchas ruidos en el salon de ciencias.",
                    character: "🏫"
                },
                {
                    speaker: "Gela",
                    text: "Hermana... mi sistema de refrigeracion... no funciona bien...",
                    character: "❄️"
                },
                {
                    speaker: "Froza",
                    text: "No puedes enfriar nada... estas sobrecalentandote...",
                    character: "❄️"
                },
                {
                    speaker: "Narrador",
                    text: "Encuentras a las gemelas. Gela parece tener problemas con su condensador.",
                    character: "❄️",
                    choices: [
                        { text: "Volver con Jeepy", next: "day2_end" },
                        { text: "Ofrecerse a arreglar el condensador", next: "twins_repair", affection: { twins: 3 } }
                    ]
                }
            ],
            twins_repair: [
                {
                    speaker: "Narrador",
                    text: "Usas tus conocimientos basicos de mecanica para revisar el condensador de Gela.",
                    character: "❄️"
                },
                {
                    speaker: "Gela",
                    text: "El humano... sabe de refrigeracion...?",
                    character: "❄️"
                },
                {
                    speaker: "Narrador",
                    text: "Logras limpiar el condensador y restaurar su funcionamiento.",
                    character: "❄️"
                },
                {
                    speaker: "Froza",
                    text: "Increible... vuelve a funcionar... como tus manos calidas...",
                    character: "❄️"
                },
                {
                    speaker: "Gela",
                    text: "Confiamos... en el humano... gracias...",
                    character: "❄️",
                    next: "day2_end"
                }
            ],
            day2_end: [
                {
                    speaker: "Narrador",
                    text: "El segundo dia llega a su fin. Has profundizado tu relacion con algunas de las heroinas.",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "Pero algo se siente diferente en el ambiente... como si una tormenta se acercara...",
                    character: "🏫"
                },
                {
                    speaker: "Narrador",
                    text: "Fin del Dia 2. Continuara...",
                    character: "🏫",
                    choices: [
                        { text: "Reiniciar", next: "restart" },
                        { text: "Menu Principal", next: "menu" }
                    ]
                }
            ]
        };

        function showMenu() {
            document.getElementById('menu').classList.remove('hidden');
            document.getElementById('characters').classList.add('hidden');
            document.getElementById('game').classList.add('hidden');
        }

        function showCharacters() {
            document.getElementById('menu').classList.add('hidden');
            document.getElementById('characters').classList.remove('hidden');
            document.getElementById('game').classList.add('hidden');
        }

        function startGame() {
            gameState = { scene: 'intro', dialog: 0, affection: { heli: 0, motorin: 0, twins: 0, jeepy: 0 } };
            document.getElementById('menu').classList.add('hidden');
            document.getElementById('characters').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            showDialog();
        }

        function showDialog() {
            const current = dialogs[gameState.scene][gameState.dialog];
            
            document.getElementById('speaker').textContent = current.speaker;
            document.getElementById('text').textContent = current.text;
            
            const characterArea = document.getElementById('characterArea');
            characterArea.innerHTML = '<div class="vehicle">' + current.character + '</div>';
            
            const choicesDiv = document.getElementById('choices');
            const continueBtn = document.getElementById('continueBtn');
            
            choicesDiv.innerHTML = '';
            continueBtn.classList.add('hidden');
            
            if (current.choices) {
                current.choices.forEach(choice => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-btn';
                    btn.textContent = choice.text;
                    btn.onclick = () => selectChoice(choice);
                    choicesDiv.appendChild(btn);
                });
            } else {
                continueBtn.classList.remove('hidden');
            }
            
            updateStats();
        }

        function selectChoice(choice) {
            if (choice.affection) {
                Object.keys(choice.affection).forEach(char => {
                    gameState.affection[char] += choice.affection[char];
                });
            }
            
            if (choice.next === 'restart') {
                startGame();
                return;
            } else if (choice.next === 'menu') {
                showMenu();
                return;
            }
            
            gameState.scene = choice.next;
            gameState.dialog = 0;
            showDialog();
        }

        function nextDialog() {
            const current = dialogs[gameState.scene][gameState.dialog];
            
            if (current.next) {
                gameState.scene = current.next;
                gameState.dialog = 0;
            } else {
                gameState.dialog++;
            }
            
            showDialog();
        }

        function updateStats() {
            const total = Object.values(gameState.affection).reduce((a, b) => a + b, 0);
            let status = 'Neutral';
            if (total > 6) status = 'Popular';
            else if (total < -2) status = 'Impopular';
            
            document.getElementById('affection').textContent = status;
        }
    </script>
</body>
</html>
